(()=>{"use strict";const t=t=>{const e=document.querySelector(".cart__wrapper");e.innerHTML="",0===t.length?e.insertAdjacentHTML("beforeend",'\n        <div class="col-12 mb-5">\n          <div class="text-center fw-medium fs-4">Корзина пуста</div>\n        </div>\n      '):t.forEach((t=>{const n=(t.regular_price.value*t.value).toFixed(2);e.insertAdjacentHTML("beforeend",`\n        <div class="col-12">\n          <div class="card mb-3" data-key="${t.id}">\n            <div class="row g-0">\n              <div class="col-2">\n                <img src="${t.image}" class="img-fluid rounded-start" alt="products">\n              </div>\n  \n              <div class="col-10">\n                <div class="card-body d-flex h-100">\n                  <div class="col-9 d-flex align-items-start justify-content-end flex-column">\n                    <h5 class="card-title fw-bold fs-4 mb-5">${t.title}</h5>\n                    <button type="button" class="btn d-flex align-items-center">\n                      <img class="card__trash-img" src="./images/icon/trash.svg" alt="trash">\n                      <span class="card__trash-text fw-medium">Удалить</span>\n                    </button>\n                  </div>\n                  <div class="col-3 d-flex align-items-start justify-content-end flex-column">\n                      <div class="d-flex flex-column align-items-end justify-content-end">\n                        <p class="fw-bold fs-2 mb-4">${n} ₽</p>\n  \n                        <div class="d-flex align-items-center card__count card__count_cart">\n                          <button class="btn_count pt-2 ps-2 pb-2 pe-3 dec" data-value="dec">\n                            <img src="images/icon/minus.svg" alt="minus">\n                          </button>\n                          <span data-value="count" class="fw-medium text-center fs-6 count">${t.value}</span>\n                          <button class="btn_count pt-2 ps-3 pb-2 pe-2 inc" data-value="inc">\n                            <img src="images/icon/plus.svg" alt="plus">\n                          </button>\n                        </div>\n                      </div>\n                  </div>\n                </div>\n              </div>\n  \n            </div>\n          </div>\n        </div>\n      `)}))};(()=>{const e=document.querySelector(".cart__wrapper"),n=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];t(n),e.addEventListener("click",(e=>{if(e.target.classList.contains("card__trash-text")){const n=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],a=e.target.closest(".card").dataset.key,c=n.findIndex((t=>t.id===+a));n.splice(c,1),localStorage.setItem("cart",JSON.stringify(n)),t(n)}if(e.target.closest(".btn_count")){const n=e.target.closest(".card"),a=n.dataset.key,c=n.querySelector('[data-value="count"]');let s=parseInt(c.textContent)||0;e.target.closest(".dec")&&s>0&&s--,e.target.closest(".inc")&&s++,c.textContent=s;const l=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],r=l.findIndex((t=>t.id===+a));-1!==r&&(l[r].value=s,localStorage.setItem("cart",JSON.stringify(l)),t(l),(t=>{const e=document.querySelector(".price__total > span"),n=t.reduce(((t,e)=>t+e.regular_price.value*e.value),0);e.textContent=n.toFixed(2)})(l))}}))})(),document.querySelectorAll("[data-wrap=count]").forEach((t=>{t.addEventListener("click",(t=>{if(t.target.closest(".card__count")){const e=t.target.closest(".card__count").querySelector('[data-value="count"]');let n=parseInt(e.textContent)||0;t.target.closest(".dec")&&(n>0&&n--,e.textContent=n),t.target.closest(".inc")&&(n++,e.textContent=n)}}))}))})();